{"dependencies":[{"name":"ws","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":25,"index":25}}],"key":"wL3sZyiL/7hQVF1TY61MLFTNHyg=","exportNames":["*"]}},{"name":"./websocket.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":26},"end":{"line":2,"column":40,"index":66}}],"key":"2j+P5AP6xm2u+2Jk+BmBUfbE1q8=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WS = void 0;\n  var ws = _interopRequireWildcard(require(_dependencyMap[0], \"ws\"));\n  var _websocket = require(_dependencyMap[1], \"./websocket.js\");\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }\n  /**\n   * WebSocket transport based on the `WebSocket` object provided by the `ws` package.\n   *\n   * Usage: Node.js, Deno (compat), Bun (compat)\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n   * @see https://caniuse.com/mdn-api_websocket\n   */\n  class WS extends _websocket.BaseWS {\n    createSocket(uri, protocols, opts) {\n      var _a;\n      if ((_a = this.socket) === null || _a === void 0 ? void 0 : _a._cookieJar) {\n        opts.headers = opts.headers || {};\n        opts.headers.cookie = typeof opts.headers.cookie === \"string\" ? [opts.headers.cookie] : opts.headers.cookie || [];\n        for (const [name, cookie] of this.socket._cookieJar.cookies) {\n          opts.headers.cookie.push(`${name}=${cookie.value}`);\n        }\n      }\n      return new ws.WebSocket(uri, protocols, opts);\n    }\n    doWrite(packet, data) {\n      const opts = {};\n      if (packet.options) {\n        opts.compress = packet.options.compress;\n      }\n      if (this.opts.perMessageDeflate) {\n        const len =\n        // @ts-ignore\n        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n        if (len < this.opts.perMessageDeflate.threshold) {\n          opts.compress = false;\n        }\n      }\n      this.ws.send(data, opts);\n    }\n  }\n  exports.WS = WS;\n});","lineCount":46,"map":[[6,2,1,0],[6,6,1,0,"ws"],[6,8,1,0],[6,11,1,0,"_interopRequireWildcard"],[6,34,1,0],[6,35,1,0,"require"],[6,42,1,0],[6,43,1,0,"_dependencyMap"],[6,57,1,0],[7,2,2,0],[7,6,2,0,"_websocket"],[7,16,2,0],[7,19,2,0,"require"],[7,26,2,0],[7,27,2,0,"_dependencyMap"],[7,41,2,0],[8,2,2,40],[8,11,2,40,"_interopRequireWildcard"],[8,35,2,40,"e"],[8,36,2,40],[8,38,2,40,"t"],[8,39,2,40],[8,68,2,40,"WeakMap"],[8,75,2,40],[8,81,2,40,"r"],[8,82,2,40],[8,89,2,40,"WeakMap"],[8,96,2,40],[8,100,2,40,"n"],[8,101,2,40],[8,108,2,40,"WeakMap"],[8,115,2,40],[8,127,2,40,"_interopRequireWildcard"],[8,150,2,40],[8,162,2,40,"_interopRequireWildcard"],[8,163,2,40,"e"],[8,164,2,40],[8,166,2,40,"t"],[8,167,2,40],[8,176,2,40,"t"],[8,177,2,40],[8,181,2,40,"e"],[8,182,2,40],[8,186,2,40,"e"],[8,187,2,40],[8,188,2,40,"__esModule"],[8,198,2,40],[8,207,2,40,"e"],[8,208,2,40],[8,214,2,40,"o"],[8,215,2,40],[8,217,2,40,"i"],[8,218,2,40],[8,220,2,40,"f"],[8,221,2,40],[8,226,2,40,"__proto__"],[8,235,2,40],[8,243,2,40,"default"],[8,250,2,40],[8,252,2,40,"e"],[8,253,2,40],[8,270,2,40,"e"],[8,271,2,40],[8,294,2,40,"e"],[8,295,2,40],[8,320,2,40,"e"],[8,321,2,40],[8,330,2,40,"f"],[8,331,2,40],[8,337,2,40,"o"],[8,338,2,40],[8,341,2,40,"t"],[8,342,2,40],[8,345,2,40,"n"],[8,346,2,40],[8,349,2,40,"r"],[8,350,2,40],[8,358,2,40,"o"],[8,359,2,40],[8,360,2,40,"has"],[8,363,2,40],[8,364,2,40,"e"],[8,365,2,40],[8,375,2,40,"o"],[8,376,2,40],[8,377,2,40,"get"],[8,380,2,40],[8,381,2,40,"e"],[8,382,2,40],[8,385,2,40,"o"],[8,386,2,40],[8,387,2,40,"set"],[8,390,2,40],[8,391,2,40,"e"],[8,392,2,40],[8,394,2,40,"f"],[8,395,2,40],[8,411,2,40,"t"],[8,412,2,40],[8,416,2,40,"e"],[8,417,2,40],[8,433,2,40,"t"],[8,434,2,40],[8,441,2,40,"hasOwnProperty"],[8,455,2,40],[8,456,2,40,"call"],[8,460,2,40],[8,461,2,40,"e"],[8,462,2,40],[8,464,2,40,"t"],[8,465,2,40],[8,472,2,40,"i"],[8,473,2,40],[8,477,2,40,"o"],[8,478,2,40],[8,481,2,40,"Object"],[8,487,2,40],[8,488,2,40,"defineProperty"],[8,502,2,40],[8,507,2,40,"Object"],[8,513,2,40],[8,514,2,40,"getOwnPropertyDescriptor"],[8,538,2,40],[8,539,2,40,"e"],[8,540,2,40],[8,542,2,40,"t"],[8,543,2,40],[8,550,2,40,"i"],[8,551,2,40],[8,552,2,40,"get"],[8,555,2,40],[8,559,2,40,"i"],[8,560,2,40],[8,561,2,40,"set"],[8,564,2,40],[8,568,2,40,"o"],[8,569,2,40],[8,570,2,40,"f"],[8,571,2,40],[8,573,2,40,"t"],[8,574,2,40],[8,576,2,40,"i"],[8,577,2,40],[8,581,2,40,"f"],[8,582,2,40],[8,583,2,40,"t"],[8,584,2,40],[8,588,2,40,"e"],[8,589,2,40],[8,590,2,40,"t"],[8,591,2,40],[8,602,2,40,"f"],[8,603,2,40],[8,608,2,40,"e"],[8,609,2,40],[8,611,2,40,"t"],[8,612,2,40],[9,2,3,0],[10,0,4,0],[11,0,5,0],[12,0,6,0],[13,0,7,0],[14,0,8,0],[15,0,9,0],[16,0,10,0],[17,2,11,7],[17,8,11,13,"WS"],[17,10,11,15],[17,19,11,24,"BaseWS"],[17,36,11,30],[17,37,11,31],[18,4,12,4,"createSocket"],[18,16,12,16,"createSocket"],[18,17,12,17,"uri"],[18,20,12,20],[18,22,12,22,"protocols"],[18,31,12,31],[18,33,12,33,"opts"],[18,37,12,37],[18,39,12,39],[19,6,13,8],[19,10,13,12,"_a"],[19,12,13,14],[20,6,14,8],[20,10,14,12],[20,11,14,13,"_a"],[20,13,14,15],[20,16,14,18],[20,20,14,22],[20,21,14,23,"socket"],[20,27,14,29],[20,33,14,35],[20,37,14,39],[20,41,14,43,"_a"],[20,43,14,45],[20,48,14,50],[20,53,14,55],[20,54,14,56],[20,57,14,59],[20,62,14,64],[20,63,14,65],[20,66,14,68,"_a"],[20,68,14,70],[20,69,14,71,"_cookieJar"],[20,79,14,81],[20,81,14,83],[21,8,15,12,"opts"],[21,12,15,16],[21,13,15,17,"headers"],[21,20,15,24],[21,23,15,27,"opts"],[21,27,15,31],[21,28,15,32,"headers"],[21,35,15,39],[21,39,15,43],[21,40,15,44],[21,41,15,45],[22,8,16,12,"opts"],[22,12,16,16],[22,13,16,17,"headers"],[22,20,16,24],[22,21,16,25,"cookie"],[22,27,16,31],[22,30,17,16],[22,37,17,23,"opts"],[22,41,17,27],[22,42,17,28,"headers"],[22,49,17,35],[22,50,17,36,"cookie"],[22,56,17,42],[22,61,17,47],[22,69,17,55],[22,72,18,22],[22,73,18,23,"opts"],[22,77,18,27],[22,78,18,28,"headers"],[22,85,18,35],[22,86,18,36,"cookie"],[22,92,18,42],[22,93,18,43],[22,96,19,22,"opts"],[22,100,19,26],[22,101,19,27,"headers"],[22,108,19,34],[22,109,19,35,"cookie"],[22,115,19,41],[22,119,19,45],[22,121,19,47],[23,8,20,12],[23,13,20,17],[23,19,20,23],[23,20,20,24,"name"],[23,24,20,28],[23,26,20,30,"cookie"],[23,32,20,36],[23,33,20,37],[23,37,20,41],[23,41,20,45],[23,42,20,46,"socket"],[23,48,20,52],[23,49,20,53,"_cookieJar"],[23,59,20,63],[23,60,20,64,"cookies"],[23,67,20,71],[23,69,20,73],[24,10,21,16,"opts"],[24,14,21,20],[24,15,21,21,"headers"],[24,22,21,28],[24,23,21,29,"cookie"],[24,29,21,35],[24,30,21,36,"push"],[24,34,21,40],[24,35,21,41],[24,38,21,44,"name"],[24,42,21,48],[24,46,21,52,"cookie"],[24,52,21,58],[24,53,21,59,"value"],[24,58,21,64],[24,60,21,66],[24,61,21,67],[25,8,22,12],[26,6,23,8],[27,6,24,8],[27,13,24,15],[27,17,24,19,"ws"],[27,19,24,21],[27,20,24,22,"WebSocket"],[27,29,24,31],[27,30,24,32,"uri"],[27,33,24,35],[27,35,24,37,"protocols"],[27,44,24,46],[27,46,24,48,"opts"],[27,50,24,52],[27,51,24,53],[28,4,25,4],[29,4,26,4,"doWrite"],[29,11,26,11,"doWrite"],[29,12,26,12,"packet"],[29,18,26,18],[29,20,26,20,"data"],[29,24,26,24],[29,26,26,26],[30,6,27,8],[30,12,27,14,"opts"],[30,16,27,18],[30,19,27,21],[30,20,27,22],[30,21,27,23],[31,6,28,8],[31,10,28,12,"packet"],[31,16,28,18],[31,17,28,19,"options"],[31,24,28,26],[31,26,28,28],[32,8,29,12,"opts"],[32,12,29,16],[32,13,29,17,"compress"],[32,21,29,25],[32,24,29,28,"packet"],[32,30,29,34],[32,31,29,35,"options"],[32,38,29,42],[32,39,29,43,"compress"],[32,47,29,51],[33,6,30,8],[34,6,31,8],[34,10,31,12],[34,14,31,16],[34,15,31,17,"opts"],[34,19,31,21],[34,20,31,22,"perMessageDeflate"],[34,37,31,39],[34,39,31,41],[35,8,32,12],[35,14,32,18,"len"],[35,17,32,21],[36,8,33,12],[37,8,34,12],[37,16,34,20],[37,21,34,25],[37,28,34,32,"data"],[37,32,34,36],[37,35,34,39,"Buffer"],[37,41,34,45],[37,42,34,46,"byteLength"],[37,52,34,56],[37,53,34,57,"data"],[37,57,34,61],[37,58,34,62],[37,61,34,65,"data"],[37,65,34,69],[37,66,34,70,"length"],[37,72,34,76],[38,8,35,12],[38,12,35,16,"len"],[38,15,35,19],[38,18,35,22],[38,22,35,26],[38,23,35,27,"opts"],[38,27,35,31],[38,28,35,32,"perMessageDeflate"],[38,45,35,49],[38,46,35,50,"threshold"],[38,55,35,59],[38,57,35,61],[39,10,36,16,"opts"],[39,14,36,20],[39,15,36,21,"compress"],[39,23,36,29],[39,26,36,32],[39,31,36,37],[40,8,37,12],[41,6,38,8],[42,6,39,8],[42,10,39,12],[42,11,39,13,"ws"],[42,13,39,15],[42,14,39,16,"send"],[42,18,39,20],[42,19,39,21,"data"],[42,23,39,25],[42,25,39,27,"opts"],[42,29,39,31],[42,30,39,32],[43,4,40,4],[44,2,41,0],[45,2,41,1,"exports"],[45,9,41,1],[45,10,41,1,"WS"],[45,12,41,1],[45,15,41,1,"WS"],[45,17,41,1],[46,0,41,1],[46,3]],"functionMap":{"names":["<global>","WS","WS#createSocket","WS#doWrite"],"mappings":"AAA;OCU;ICC;KDa;IEC;KFc;CDC"}},"type":"js/module"}]}