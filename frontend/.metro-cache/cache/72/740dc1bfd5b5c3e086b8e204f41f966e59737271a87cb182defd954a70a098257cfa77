{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.CookieJar = void 0;\n  exports.createCookieJar = createCookieJar;\n  exports.nextTick = exports.globalThisShim = exports.defaultBinaryType = void 0;\n  exports.parse = parse;\n  const nextTick = exports.nextTick = process.nextTick;\n  const globalThisShim = exports.globalThisShim = global;\n  const defaultBinaryType = exports.defaultBinaryType = \"nodebuffer\";\n  function createCookieJar() {\n    return new CookieJar();\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie\n   */\n  function parse(setCookieString) {\n    const parts = setCookieString.split(\"; \");\n    const i = parts[0].indexOf(\"=\");\n    if (i === -1) {\n      return;\n    }\n    const name = parts[0].substring(0, i).trim();\n    if (!name.length) {\n      return;\n    }\n    let value = parts[0].substring(i + 1).trim();\n    if (value.charCodeAt(0) === 0x22) {\n      // remove double quotes\n      value = value.slice(1, -1);\n    }\n    const cookie = {\n      name,\n      value\n    };\n    for (let j = 1; j < parts.length; j++) {\n      const subParts = parts[j].split(\"=\");\n      if (subParts.length !== 2) {\n        continue;\n      }\n      const key = subParts[0].trim();\n      const value = subParts[1].trim();\n      switch (key) {\n        case \"Expires\":\n          cookie.expires = new Date(value);\n          break;\n        case \"Max-Age\":\n          const expiration = new Date();\n          expiration.setUTCSeconds(expiration.getUTCSeconds() + parseInt(value, 10));\n          cookie.expires = expiration;\n          break;\n        default:\n        // ignore other keys\n      }\n    }\n    return cookie;\n  }\n  class CookieJar {\n    constructor() {\n      this._cookies = new Map();\n    }\n    parseCookies(values) {\n      if (!values) {\n        return;\n      }\n      values.forEach(value => {\n        const parsed = parse(value);\n        if (parsed) {\n          this._cookies.set(parsed.name, parsed);\n        }\n      });\n    }\n    get cookies() {\n      const now = Date.now();\n      this._cookies.forEach((cookie, name) => {\n        var _a;\n        if (((_a = cookie.expires) === null || _a === void 0 ? void 0 : _a.getTime()) < now) {\n          this._cookies.delete(name);\n        }\n      });\n      return this._cookies.entries();\n    }\n    addCookies(xhr) {\n      const cookies = [];\n      for (const [name, cookie] of this.cookies) {\n        cookies.push(`${name}=${cookie.value}`);\n      }\n      if (cookies.length) {\n        xhr.setDisableHeaderCheck(true);\n        xhr.setRequestHeader(\"cookie\", cookies.join(\"; \"));\n      }\n    }\n    appendCookies(headers) {\n      for (const [name, cookie] of this.cookies) {\n        headers.append(\"cookie\", `${name}=${cookie.value}`);\n      }\n    }\n  }\n  exports.CookieJar = CookieJar;\n});","lineCount":101,"map":[[9,2,1,7],[9,8,1,13,"nextTick"],[9,16,1,21],[9,19,1,21,"exports"],[9,26,1,21],[9,27,1,21,"nextTick"],[9,35,1,21],[9,38,1,24,"process"],[9,45,1,31],[9,46,1,32,"nextTick"],[9,54,1,40],[10,2,2,7],[10,8,2,13,"globalThisShim"],[10,22,2,27],[10,25,2,27,"exports"],[10,32,2,27],[10,33,2,27,"globalThisShim"],[10,47,2,27],[10,50,2,30,"global"],[10,56,2,36],[11,2,3,7],[11,8,3,13,"defaultBinaryType"],[11,25,3,30],[11,28,3,30,"exports"],[11,35,3,30],[11,36,3,30,"defaultBinaryType"],[11,53,3,30],[11,56,3,33],[11,68,3,45],[12,2,4,7],[12,11,4,16,"createCookieJar"],[12,26,4,31,"createCookieJar"],[12,27,4,31],[12,29,4,34],[13,4,5,4],[13,11,5,11],[13,15,5,15,"CookieJar"],[13,24,5,24],[13,25,5,25],[13,26,5,26],[14,2,6,0],[15,2,7,0],[16,0,8,0],[17,0,9,0],[18,2,10,7],[18,11,10,16,"parse"],[18,16,10,21,"parse"],[18,17,10,22,"setCookieString"],[18,32,10,37],[18,34,10,39],[19,4,11,4],[19,10,11,10,"parts"],[19,15,11,15],[19,18,11,18,"setCookieString"],[19,33,11,33],[19,34,11,34,"split"],[19,39,11,39],[19,40,11,40],[19,44,11,44],[19,45,11,45],[20,4,12,4],[20,10,12,10,"i"],[20,11,12,11],[20,14,12,14,"parts"],[20,19,12,19],[20,20,12,20],[20,21,12,21],[20,22,12,22],[20,23,12,23,"indexOf"],[20,30,12,30],[20,31,12,31],[20,34,12,34],[20,35,12,35],[21,4,13,4],[21,8,13,8,"i"],[21,9,13,9],[21,14,13,14],[21,15,13,15],[21,16,13,16],[21,18,13,18],[22,6,14,8],[23,4,15,4],[24,4,16,4],[24,10,16,10,"name"],[24,14,16,14],[24,17,16,17,"parts"],[24,22,16,22],[24,23,16,23],[24,24,16,24],[24,25,16,25],[24,26,16,26,"substring"],[24,35,16,35],[24,36,16,36],[24,37,16,37],[24,39,16,39,"i"],[24,40,16,40],[24,41,16,41],[24,42,16,42,"trim"],[24,46,16,46],[24,47,16,47],[24,48,16,48],[25,4,17,4],[25,8,17,8],[25,9,17,9,"name"],[25,13,17,13],[25,14,17,14,"length"],[25,20,17,20],[25,22,17,22],[26,6,18,8],[27,4,19,4],[28,4,20,4],[28,8,20,8,"value"],[28,13,20,13],[28,16,20,16,"parts"],[28,21,20,21],[28,22,20,22],[28,23,20,23],[28,24,20,24],[28,25,20,25,"substring"],[28,34,20,34],[28,35,20,35,"i"],[28,36,20,36],[28,39,20,39],[28,40,20,40],[28,41,20,41],[28,42,20,42,"trim"],[28,46,20,46],[28,47,20,47],[28,48,20,48],[29,4,21,4],[29,8,21,8,"value"],[29,13,21,13],[29,14,21,14,"charCodeAt"],[29,24,21,24],[29,25,21,25],[29,26,21,26],[29,27,21,27],[29,32,21,32],[29,36,21,36],[29,38,21,38],[30,6,22,8],[31,6,23,8,"value"],[31,11,23,13],[31,14,23,16,"value"],[31,19,23,21],[31,20,23,22,"slice"],[31,25,23,27],[31,26,23,28],[31,27,23,29],[31,29,23,31],[31,30,23,32],[31,31,23,33],[31,32,23,34],[32,4,24,4],[33,4,25,4],[33,10,25,10,"cookie"],[33,16,25,16],[33,19,25,19],[34,6,26,8,"name"],[34,10,26,12],[35,6,27,8,"value"],[36,4,28,4],[36,5,28,5],[37,4,29,4],[37,9,29,9],[37,13,29,13,"j"],[37,14,29,14],[37,17,29,17],[37,18,29,18],[37,20,29,20,"j"],[37,21,29,21],[37,24,29,24,"parts"],[37,29,29,29],[37,30,29,30,"length"],[37,36,29,36],[37,38,29,38,"j"],[37,39,29,39],[37,41,29,41],[37,43,29,43],[38,6,30,8],[38,12,30,14,"subParts"],[38,20,30,22],[38,23,30,25,"parts"],[38,28,30,30],[38,29,30,31,"j"],[38,30,30,32],[38,31,30,33],[38,32,30,34,"split"],[38,37,30,39],[38,38,30,40],[38,41,30,43],[38,42,30,44],[39,6,31,8],[39,10,31,12,"subParts"],[39,18,31,20],[39,19,31,21,"length"],[39,25,31,27],[39,30,31,32],[39,31,31,33],[39,33,31,35],[40,8,32,12],[41,6,33,8],[42,6,34,8],[42,12,34,14,"key"],[42,15,34,17],[42,18,34,20,"subParts"],[42,26,34,28],[42,27,34,29],[42,28,34,30],[42,29,34,31],[42,30,34,32,"trim"],[42,34,34,36],[42,35,34,37],[42,36,34,38],[43,6,35,8],[43,12,35,14,"value"],[43,17,35,19],[43,20,35,22,"subParts"],[43,28,35,30],[43,29,35,31],[43,30,35,32],[43,31,35,33],[43,32,35,34,"trim"],[43,36,35,38],[43,37,35,39],[43,38,35,40],[44,6,36,8],[44,14,36,16,"key"],[44,17,36,19],[45,8,37,12],[45,13,37,17],[45,22,37,26],[46,10,38,16,"cookie"],[46,16,38,22],[46,17,38,23,"expires"],[46,24,38,30],[46,27,38,33],[46,31,38,37,"Date"],[46,35,38,41],[46,36,38,42,"value"],[46,41,38,47],[46,42,38,48],[47,10,39,16],[48,8,40,12],[48,13,40,17],[48,22,40,26],[49,10,41,16],[49,16,41,22,"expiration"],[49,26,41,32],[49,29,41,35],[49,33,41,39,"Date"],[49,37,41,43],[49,38,41,44],[49,39,41,45],[50,10,42,16,"expiration"],[50,20,42,26],[50,21,42,27,"setUTCSeconds"],[50,34,42,40],[50,35,42,41,"expiration"],[50,45,42,51],[50,46,42,52,"getUTCSeconds"],[50,59,42,65],[50,60,42,66],[50,61,42,67],[50,64,42,70,"parseInt"],[50,72,42,78],[50,73,42,79,"value"],[50,78,42,84],[50,80,42,86],[50,82,42,88],[50,83,42,89],[50,84,42,90],[51,10,43,16,"cookie"],[51,16,43,22],[51,17,43,23,"expires"],[51,24,43,30],[51,27,43,33,"expiration"],[51,37,43,43],[52,10,44,16],[53,8,45,12],[54,8,46,12],[55,6,47,8],[56,4,48,4],[57,4,49,4],[57,11,49,11,"cookie"],[57,17,49,17],[58,2,50,0],[59,2,51,7],[59,8,51,13,"CookieJar"],[59,17,51,22],[59,18,51,23],[60,4,52,4,"constructor"],[60,15,52,15,"constructor"],[60,16,52,15],[60,18,52,18],[61,6,53,8],[61,10,53,12],[61,11,53,13,"_cookies"],[61,19,53,21],[61,22,53,24],[61,26,53,28,"Map"],[61,29,53,31],[61,30,53,32],[61,31,53,33],[62,4,54,4],[63,4,55,4,"parseCookies"],[63,16,55,16,"parseCookies"],[63,17,55,17,"values"],[63,23,55,23],[63,25,55,25],[64,6,56,8],[64,10,56,12],[64,11,56,13,"values"],[64,17,56,19],[64,19,56,21],[65,8,57,12],[66,6,58,8],[67,6,59,8,"values"],[67,12,59,14],[67,13,59,15,"forEach"],[67,20,59,22],[67,21,59,24,"value"],[67,26,59,29],[67,30,59,34],[68,8,60,12],[68,14,60,18,"parsed"],[68,20,60,24],[68,23,60,27,"parse"],[68,28,60,32],[68,29,60,33,"value"],[68,34,60,38],[68,35,60,39],[69,8,61,12],[69,12,61,16,"parsed"],[69,18,61,22],[69,20,61,24],[70,10,62,16],[70,14,62,20],[70,15,62,21,"_cookies"],[70,23,62,29],[70,24,62,30,"set"],[70,27,62,33],[70,28,62,34,"parsed"],[70,34,62,40],[70,35,62,41,"name"],[70,39,62,45],[70,41,62,47,"parsed"],[70,47,62,53],[70,48,62,54],[71,8,63,12],[72,6,64,8],[72,7,64,9],[72,8,64,10],[73,4,65,4],[74,4,66,4],[74,8,66,8,"cookies"],[74,15,66,15,"cookies"],[74,16,66,15],[74,18,66,18],[75,6,67,8],[75,12,67,14,"now"],[75,15,67,17],[75,18,67,20,"Date"],[75,22,67,24],[75,23,67,25,"now"],[75,26,67,28],[75,27,67,29],[75,28,67,30],[76,6,68,8],[76,10,68,12],[76,11,68,13,"_cookies"],[76,19,68,21],[76,20,68,22,"forEach"],[76,27,68,29],[76,28,68,30],[76,29,68,31,"cookie"],[76,35,68,37],[76,37,68,39,"name"],[76,41,68,43],[76,46,68,48],[77,8,69,12],[77,12,69,16,"_a"],[77,14,69,18],[78,8,70,12],[78,12,70,16],[78,13,70,17],[78,14,70,18,"_a"],[78,16,70,20],[78,19,70,23,"cookie"],[78,25,70,29],[78,26,70,30,"expires"],[78,33,70,37],[78,39,70,43],[78,43,70,47],[78,47,70,51,"_a"],[78,49,70,53],[78,54,70,58],[78,59,70,63],[78,60,70,64],[78,63,70,67],[78,68,70,72],[78,69,70,73],[78,72,70,76,"_a"],[78,74,70,78],[78,75,70,79,"getTime"],[78,82,70,86],[78,83,70,87],[78,84,70,88],[78,88,70,92,"now"],[78,91,70,95],[78,93,70,97],[79,10,71,16],[79,14,71,20],[79,15,71,21,"_cookies"],[79,23,71,29],[79,24,71,30,"delete"],[79,30,71,36],[79,31,71,37,"name"],[79,35,71,41],[79,36,71,42],[80,8,72,12],[81,6,73,8],[81,7,73,9],[81,8,73,10],[82,6,74,8],[82,13,74,15],[82,17,74,19],[82,18,74,20,"_cookies"],[82,26,74,28],[82,27,74,29,"entries"],[82,34,74,36],[82,35,74,37],[82,36,74,38],[83,4,75,4],[84,4,76,4,"addCookies"],[84,14,76,14,"addCookies"],[84,15,76,15,"xhr"],[84,18,76,18],[84,20,76,20],[85,6,77,8],[85,12,77,14,"cookies"],[85,19,77,21],[85,22,77,24],[85,24,77,26],[86,6,78,8],[86,11,78,13],[86,17,78,19],[86,18,78,20,"name"],[86,22,78,24],[86,24,78,26,"cookie"],[86,30,78,32],[86,31,78,33],[86,35,78,37],[86,39,78,41],[86,40,78,42,"cookies"],[86,47,78,49],[86,49,78,51],[87,8,79,12,"cookies"],[87,15,79,19],[87,16,79,20,"push"],[87,20,79,24],[87,21,79,25],[87,24,79,28,"name"],[87,28,79,32],[87,32,79,36,"cookie"],[87,38,79,42],[87,39,79,43,"value"],[87,44,79,48],[87,46,79,50],[87,47,79,51],[88,6,80,8],[89,6,81,8],[89,10,81,12,"cookies"],[89,17,81,19],[89,18,81,20,"length"],[89,24,81,26],[89,26,81,28],[90,8,82,12,"xhr"],[90,11,82,15],[90,12,82,16,"setDisableHeaderCheck"],[90,33,82,37],[90,34,82,38],[90,38,82,42],[90,39,82,43],[91,8,83,12,"xhr"],[91,11,83,15],[91,12,83,16,"setRequestHeader"],[91,28,83,32],[91,29,83,33],[91,37,83,41],[91,39,83,43,"cookies"],[91,46,83,50],[91,47,83,51,"join"],[91,51,83,55],[91,52,83,56],[91,56,83,60],[91,57,83,61],[91,58,83,62],[92,6,84,8],[93,4,85,4],[94,4,86,4,"appendCookies"],[94,17,86,17,"appendCookies"],[94,18,86,18,"headers"],[94,25,86,25],[94,27,86,27],[95,6,87,8],[95,11,87,13],[95,17,87,19],[95,18,87,20,"name"],[95,22,87,24],[95,24,87,26,"cookie"],[95,30,87,32],[95,31,87,33],[95,35,87,37],[95,39,87,41],[95,40,87,42,"cookies"],[95,47,87,49],[95,49,87,51],[96,8,88,12,"headers"],[96,15,88,19],[96,16,88,20,"append"],[96,22,88,26],[96,23,88,27],[96,31,88,35],[96,33,88,37],[96,36,88,40,"name"],[96,40,88,44],[96,44,88,48,"cookie"],[96,50,88,54],[96,51,88,55,"value"],[96,56,88,60],[96,58,88,62],[96,59,88,63],[97,6,89,8],[98,4,90,4],[99,2,91,0],[100,2,91,1,"exports"],[100,9,91,1],[100,10,91,1,"CookieJar"],[100,19,91,1],[100,22,91,1,"CookieJar"],[100,31,91,1],[101,0,91,1],[101,3]],"functionMap":{"names":["<global>","createCookieJar","parse","CookieJar","CookieJar#constructor","CookieJar#parseCookies","values.forEach$argument_0","CookieJar#get__cookies","_cookies.forEach$argument_0","CookieJar#addCookies","CookieJar#appendCookies"],"mappings":"AAA;OCG;CDE;OEI;CFwC;OGC;ICC;KDE;IEC;uBCI;SDK;KFC;IIC;8BCE;SDK;KJE;IMC;KNS;IOC;KPI;CHC"}},"type":"js/module"}]}